{{ $team := site.Data.public.team }}

{{ with .departments }}
{{ $team = where $team "departments" "intersect" . }}
{{ end }}

{{ with .types }}
{{ $team = where $team "type" "in" . }}
{{ end }}

{{ with .reports_to }}
{{ $reports_to := cond (not reflect.IsSlice .) (slice .) . }}
{{ $team = where $team "reports_to" "in" $reports_to }}
{{ end }}

{{ return $team }}
